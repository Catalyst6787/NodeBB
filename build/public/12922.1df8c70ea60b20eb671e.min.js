(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,12922,15794,25432,26174,34271,36159,46379,49897,52185,58540,62441,74566,88189,92332,98463,99127],{12236:((I,E,a)=>{"use strict";var m,v;m=[a(49897),a(29930)],v=(function(g,w){const c={};c.init=function(t,i){const s=t.find(".draft-icon"),n=t.attr("data-uuid");function o(){$(`[component="composer"][data-uuid="${n}"]`).length&&(i.save_id||(i.save_id=utils.generateSaveId(app.user.uid)),c.addToDraftList("available",i.save_id),c.addToDraftList("open",i.save_id),u(t,s,i))}t.on("keyup","textarea, input.handle, input.title",utils.debounce(o,1e3)),t.on("click",'input[type="checkbox"]',utils.debounce(o,1e3)),t.on("click",'[component="category/list"] [data-cid]',utils.debounce(o,1e3)),t.on("itemAdded",".tags",utils.debounce(o,1e3)),t.on("thumb.uploaded",o),s.on("animationend",function(){$(this).toggleClass("active",!1)}),$(window).on("unload",function(){const l=c.getList("open");l.length&&l.forEach(b=>c.removeFromDraftList("open",b))}),c.migrateGuest()};function x(t){return parseInt(t,10)>0?localStorage:sessionStorage}c.get=function(t){if(!t)return null;const i=t.split(":")[1],s=x(i);try{const n=s.getItem(t),o=JSON.parse(n)||null;if(!o)throw new Error(`can't parse draft json for ${t}`);return o.save_id=t,o.timestamp&&(o.timestampISO=utils.toISOString(o.timestamp)),$(window).trigger("action:composer.drafts.get",{save_id:t,draft:o,storage:s}),o}catch{return console.warn(`[composer/drafts] Could not get draft ${t}, removing`),c.removeFromDraftList("available"),c.removeFromDraftList("open"),null}};function u(t,i,s){if(d(app.user.uid?"localStorage":"sessionStorage")&&s&&s.save_id&&t.length){const n=t.find("input.title"),o=n&&n.length&&n.val(),l=t.find("textarea").val(),b=x(app.user.uid);if(l.length||o&&o.length){const h={save_id:s.save_id,action:s.action,text:l,uuid:t.attr("data-uuid"),timestamp:Date.now()};if(s.action==="topics.post"){const P=t.find("input.tags").val();h.tags=P,h.title=o,h.cid=s.cid,h.thumbs=s.thumbs||[]}else s.action==="posts.reply"?(h.title=s.title,h.tid=s.tid,h.toPid=s.toPid):s.action==="posts.edit"&&(h.pid=s.pid,h.title=o||s.title,h.thumbs=s.thumbs||[]);app.user.uid||(h.handle=t.find("input.handle").val()),b.setItem(s.save_id,JSON.stringify(h)),$(window).trigger("action:composer.drafts.save",{storage:b,postData:s,postContainer:t}),i.toggleClass("active",!0)}else c.removeDraft(s.save_id)}}c.removeDraft=function(t){if(!t)return;c.removeFromDraftList("available",t),c.removeFromDraftList("open",t);const i=t.split(":")[1],s=x(i);s.removeItem(t),$(window).trigger("action:composer.drafts.remove",{storage:s,save_id:t})},c.getList=function(t){try{const i=localStorage.getItem(`drafts:${t}`);return JSON.parse(i)||[]}catch{return console.warn("[composer/drafts] Could not read list of available drafts"),[]}},c.addToDraftList=function(t,i){if(!d(app.user.uid?"localStorage":"sessionStorage")||!i)return;const s=c.getList(t);s.includes(i)||(s.push(i),localStorage.setItem("drafts:"+t,JSON.stringify(s)))},c.removeFromDraftList=function(t,i){if(!d(app.user.uid?"localStorage":"sessionStorage")||!i)return;const s=c.getList(t);s.includes(i)&&(s.splice(s.indexOf(i),1),localStorage.setItem("drafts:"+t,JSON.stringify(s)))},c.migrateGuest=function(){if(d("localStorage")&&app.user.uid){const t=/^composer:\d+:\d$/,i=Object.keys(sessionStorage).filter(function(o){return t.test(o)}),s=new Set([]),n=i.map(function(o){const l=o.split(":");return l[1]=app.user.uid,s.add(l.join(":")),l.join(":")});return i.forEach(function(o,l){localStorage.setItem(n[l],sessionStorage.getItem(o)),sessionStorage.removeItem(o)}),s.forEach(function(o){c.addToDraftList("available",o)}),s}},c.listAvailable=function(){return c.getList("available").map(c.get).filter(Boolean)},c.getAvailableCount=function(){return c.listAvailable().length},c.open=function(t){if(!t)return;const i=c.get(t);f(t,i)},c.loadOpen=function(){if(ajaxify.data.template.login||ajaxify.data.template.register||config.hasOwnProperty("openDraftsOnPageLoad")&&!config.openDraftsOnPageLoad)return;const t=c.getList("available"),i=c.getList("open");t.length&&t.forEach(function(s){if(!s||i.includes(s))return;const n=c.get(s);if(!n||!n.text&&!n.title){c.removeFromDraftList("available",s),c.removeFromDraftList("open",s);return}f(s,n)})};function f(t,i){const n=t.split(":")[1];parseInt(app.user.uid,10)===parseInt(n,10)&&Promise.all([a.e(20056),a.e(23662),a.e(65285),a.e(40559),a.e(449),a.e(5785),a.e(58540)]).then(function(){var o=[a(71431)];(function(l){i.action==="topics.post"?l.newTopic({save_id:i.save_id,cid:i.cid,handle:app.user&&app.user.uid?void 0:utils.escapeHTML(i.handle),title:utils.escapeHTML(i.title),body:i.text,tags:String(i.tags||"").split(","),thumbs:i.thumbs||[]}):i.action==="posts.reply"?g.get("/topics/"+i.tid,{},function(b,h){if(b)return w.error(b);l.newReply({save_id:i.save_id,tid:i.tid,toPid:i.toPid,title:h.title,body:i.text})}):i.action==="posts.edit"&&l.editPost({save_id:i.save_id,pid:i.pid,title:i.title?utils.escapeHTML(i.title):void 0,body:i.text,thumbs:i.thumbs||[]})}).apply(null,o)}).catch(a.oe)}function d(t){var i;try{i=window[t];var s="__storage_test__";return i.setItem(s,s),i.removeItem(s),!0}catch(n){return n instanceof DOMException&&(n.code===22||n.code===1014||n.name==="QuotaExceededError"||n.name==="NS_ERROR_DOM_QUOTA_REACHED")&&i&&i.length!==0}}return c}).apply(E,m),v!==void 0&&(I.exports=v)}),13230:((I,E,a)=>{"use strict";var m,v,g;(function(w){v=[a(53050)],m=w,g=typeof m=="function"?m.apply(E,v):m,g!==void 0&&(I.exports=g)})(function(w){const c=w("[^\\p{L}\\s\\d\\-_@.]","g"),A=/[^\w\s\d\-_@.]/g,x=/^\s+|\s+$/g,u=/\s+/g,f=/-+/g,d=/-$/g,t=/^-/g,i=/^[\w\d\s.,\-@]+$/;return function(n,o){return n?(n=String(n).replace(x,""),i.test(n)?n=n.replace(A,"-"):n=w.replace(n,c,"-"),n=o?n:n.toLocaleLowerCase(),n=n.replace(u,"-"),n=n.replace(f,"-"),n=n.replace(d,""),n=n.replace(t,""),n):""}})}),24187:((I,E,a)=>{"use strict";var m,v;m=[a(64061)],v=(function(){const g={};g.show=function(u,f){const d=u.hasOwnProperty("fileSize")&&u.fileSize!==void 0?parseInt(u.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:u.hasOwnProperty("showHelp")&&u.showHelp!==void 0?u.showHelp:!0,fileSize:d,title:u.title||"[[global:upload-file]]",description:u.description||"",button:u.button||"[[global:upload]]",accept:u.accept?u.accept.replace(/,/g,"&#44; "):""},function(t){t.modal("show"),t.on("hidden.bs.modal",function(){t.remove()});const i=t.find("#uploadForm");i.attr("action",u.route),i.find("#params").val(JSON.stringify(u.params)),t.find("#fileUploadSubmitBtn").on("click",function(){$(this).addClass("disabled"),i.submit()}),i.submit(function(){return w(t,d,f),!1})})},g.hideAlerts=function(u){$(u).find("#alert-status, #alert-success, #alert-error, #upload-progress-box").addClass("hide")};function w(u,f,d){c(u,"status","[[uploads:uploading-file]]"),u.find("#upload-progress-bar").css("width","0%"),u.find("#upload-progress-box").show().removeClass("hide");const t=u.find("#fileInput");if(!t.val())return c(u,"error","[[uploads:select-file-to-upload]]");if(!x(t[0],f))return c(u,"error","[[error:file-too-big, "+f+"]]");g.ajaxSubmit(u,d)}function c(u,f,d){g.hideAlerts(u),f==="error"&&u.find("#fileUploadSubmitBtn").removeClass("disabled"),d=d.replace(/&amp;#44/g,"&#44"),u.find("#alert-"+f).translateText(d).removeClass("hide")}g.ajaxSubmit=function(u,f){u.find("#uploadForm").ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},error:function(t){t=A(t),c(u,"error",t.responseJSON?.status?.message||t.responseJSON?.error||`[[error:upload-error-fallback, ${t.status} ${t.statusText}]]`)},uploadProgress:function(t,i,s,n){u.find("#upload-progress-bar").css("width",n+"%")},success:function(t){let i=A(t);t.hasOwnProperty("response")&&t.hasOwnProperty("status")&&t.status.code==="ok"&&(i=t.response.images),f(i[0].url),c(u,"success","[[uploads:upload-success]]"),setTimeout(function(){g.hideAlerts(u),u.modal("hide")},750)}})};function A(u){if(typeof u=="string")try{return JSON.parse(u)}catch(f){return console.error(f),{error:"[[error:parse-error]]"}}return u}function x(u,f){return window.FileReader&&f?u.files[0].size<=f*1e3:!0}return g}).apply(E,m),v!==void 0&&(I.exports=v)}),29869:(I=>{"use strict";I.exports=function(E,a,m){a.setGlobal("true",!0),a.setGlobal("false",!1);const v=1440*60*1e3,g={displayMenuItem:c,buildMetaTag:A,buildLinkTag:x,stringify:u,escape:f,stripTags:d,buildCategoryIcon:t,buildCategoryLabel:i,generateCategoryBackground:s,generateChildrenCategories:n,generateTopicClass:o,membershipBtn:l,spawnPrivilegeStates:b,localeToHTML:h,renderTopicImage:P,renderDigestAvatar:D,userAgentIcons:W,buildAvatar:U,increment:k,generateWroteReplied:M,generateRepliedTo:B,generateWrote:O,encodeURIComponent:K,isoTimeToLocaleString:H,shouldHideReplyContainer:J,humanReadableNumber:z,formattedNumber:Y,txEscape:G,uploadBasename:j,generatePlaceholderWave:Q,register:V,__escape:w};function w(e){return e}function c(e,r){const p=e.navigation[r];return!(!p||p.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||p.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||p.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function A(e){const r=e.name?'name="'+e.name+'" ':"",p=e.property?'property="'+e.property+'" ':"",y=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+r+p+y+`/>
	`}function x(e){const r=["link","rel","as","type","href","sizes","title","crossorigin"],[p,y,R,S,L,N,T,F]=r.map(C=>e[C]?`${C}="${e[C]}" `:"");return"<link "+p+y+R+S+N+T+L+F+`/>
	`}function u(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function f(e){return E.escapeHTML(e)}function d(e){return E.stripHTMLTags(e)}function t(e,r,p){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${p}" style="${s(e)} width:${r}; height: ${r}; font-size: ${parseInt(r,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function i(e,r="a",p=""){if(!e)return"";const y=r==="a"?`href="${m}/category/${e.slug}"`:"";return`<${r} ${y} class="badge px-1 text-truncate text-decoration-none ${p}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important; max-width: 70vw;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</${r}>`}function s(e){if(!e)return"";const r=[];return e.bgColor&&(r.push("background-color: "+e.bgColor),r.push(`border-color: ${e.bgColor}!important`)),e.color&&r.push("color: "+e.color),e.backgroundImage&&(r.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&r.push("background-size: "+e.imageClass)),r.join("; ")+";"}function n(e){let r="";return!e||!e.children||!e.children.length||(e.children.forEach(function(p){if(p&&!p.isSection){const y=p.link?p.link:m+"/category/"+p.slug;r+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+s(p)+'"><i class="fa fa-fw '+p.icon+'"></i></div><a href="'+y+'"><small>'+p.name+"</small></a></span>"}}),r=r&&'<span class="category-children">'+r+"</span>"),r}function o(e){return["locked","pinned","deleted","unread","scheduled"].filter(p=>!!e[p]).join(" ")}function l(e,r=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${r}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${r}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success ${r}" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function b(e,r,p,y){const R=[];for(const[S,L]of Object.entries(p))R.push({name:S,state:L,type:y[S]});return R.map(function(S){const L=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],N=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],T=["groups:moderate"];let F=["groups:view:users","groups:find","groups:read","groups:topics:read","groups:topics:create","groups:topics:reply","groups:topics:tag","groups:posts:edit","groups:posts:history","groups:posts:delete","groups:posts:upvote","groups:posts:downvote","groups:topics:delete"];e===-1&&(F=F.slice(3));const C=r==="guests"&&(L.includes(S.name)||S.name.startsWith("groups:admin:"))||r==="spiders"&&!N.includes(S.name)||r==="fediverse"&&!F.includes(S.name)||r==="Global Moderators"&&T.includes(S.name);return`
				<td data-privilege="${S.name}" data-value="${S.state}" data-type="${S.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none${C?' d-none"':""}" autocomplete="off" type="checkbox"${S.state?" checked":""}${C?' disabled="disabled" aria-diabled="true"':""} />
					</div>
				</td>
			`}).join("")}function h(e,r){return e=e||r||"en-GB",e.replace("_","-")}function P(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.displayname+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.displayname+'" />'}function D(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function W(e){let r="";switch(e.platform){case"Linux":r+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":r+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":r+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":r+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":r+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":r+='<i class="fa fa-fw fa-mobile"></i>';break;default:r+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":r+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":r+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":r+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":r+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":r+='<i class="fa fa-fw fa-edge"></i>';break;default:r+='<i class="fa fa-fw fa-question-circle"></i>';break}return r}function U(e,r,p,y,R){e||(e=this),y=y||"";const S=new Map([["title",e.displayname],["data-uid",e.uid],["class",`avatar ${y}${p?" avatar-rounded":""}`]]),L=[`--avatar-size: ${r};`],N=F=>Array.from(F).reduce((C,[Z,X])=>(C+=` ${Z}="${X}"`,C),"");let T="";return e.picture&&(T+=`<img${N(S)} alt="${e.displayname}" loading="lazy" component="${R||"avatar/picture"}" src="${e.picture}" style="${L.join(" ")}" onError="this.remove()" itemprop="image" />`),T+=`<span${N(S)} component="${R||"avatar/icon"}" style="${L.join(" ")} background-color: ${e["icon:bgColor"]}">${e["icon:text"]}</span>`,T}function k(e,r){return String(e+parseInt(r,10))}function M(e,r){return e.toPid?B(e,r):O(e,r)}function B(e,r){const p=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-r*v?"on":"ago"}, ${e.toPid}, ${m}/post/${encodeURIComponent(e.toPid)}, ${p}, ${m}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function O(e,r){return`[[topic:wrote-${e.timestamp<Date.now()-r*v?"on":"ago"}, ${m}/post/${encodeURIComponent(e.pid)}, ${e.timestampISO}]]`}function K(e){return encodeURIComponent(e)}function H(e,r="en-GB"){return new Date(e).toLocaleString([r],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function J(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function z(e,r=1){return E.makeNumberHumanReadable(e,r)}function Y(e){return E.addCommas(e)}function G(e){return String(e).replace(/%/g,"&#37;").replace(/,/g,"&#44;")}function j(e,r="/"){const p=/^\d+-/,y=e.substr(e.lastIndexOf(r)+1);return p.test(y)?y.slice(14):y}function Q(e){return e.map(p=>p==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${p}"></div>
			</li>`).join("")}function V(){Object.keys(g).forEach(function(e){a.registerHelper(e,g[e])})}return g}}),30076:((I,E,a)=>{"use strict";var m,v;const g=a(29869);m=[a(77918),a(81335)],v=(function(w,c){return g(w,c,config.relative_path)}).apply(E,m),v!==void 0&&(I.exports=v)}),36159:((I,E,a)=>{"use strict";var m,v;m=[a(49897),a(33530),a(29930),a(24187),a(81335),a(17459),a(65285)],v=(function(g,w,c,A,x,u){const f={};return f.get=d=>g.get(`/topics/${d}/thumbs`,{thumbsOnly:1}),f.delete=(d,t)=>g.del(`/topics/${d}/thumbs`,{path:t}),f.updateTopicThumbs=async d=>{const t=await f.get(d),i=await app.parseAndTranslate("partials/topic/thumbs",{thumbs:t});$('[component="topic/thumb/list"]').html(i)},f.deleteAll=d=>{f.get(d).then(t=>{Promise.all(t.map(i=>f.delete(d,i.url)))})},f.upload=()=>new Promise(d=>{A.show({title:"[[topic:composer.thumb-title]]",method:"put",route:config.relative_path+"/api/topic/thumb/upload"},function(t){d(t)})}),f.modal={},f.modal.open=function(d){const{id:t,postData:i}=d;let{modal:s}=d;const n=i.thumbs||[];return new Promise(o=>{x.render("modals/topic-thumbs",{thumbs:n}).then(l=>{s?u.translate(l,function(b){s.find(".bootbox-body").html(b),f.modal.handleSort({modal:s,thumbs:n})}):(s=w.dialog({title:"[[modules:thumbs.modal.title]]",message:l,onEscape:!0,backdrop:!0,buttons:{add:{label:'<i class="fa fa-plus"></i> [[modules:thumbs.modal.add]]',className:"btn-success",callback:()=>(f.upload().then(b=>{i.thumbs.push(b.replace(new RegExp(`^${config.upload_url}`),"")),f.modal.open({...d,modal:s}),Promise.all([a.e(20056),a.e(40559),a.e(449),a.e(5785),a.e(52185)]).then(function(){var h=[a(71431)];(P=>{P.updateThumbCount(t,$(`[component="composer"][data-uuid="${t}"]`)),o()}).apply(null,h)}).catch(a.oe)}),!1)},close:{label:"[[global:close]]",className:"btn-primary"}}}),f.modal.handleDelete({...d,modal:s}),f.modal.handleSort({modal:s,thumbs:n}))})})},f.modal.handleDelete=d=>{const t=d.modal.get(0),{id:i}=d;t.addEventListener("click",s=>{s.target.closest('button[data-action="remove"]')&&w.confirm("[[modules:thumbs.modal.confirm-remove]]",n=>{if(!n)return;const o=s.target.closest("[data-path]").getAttribute("data-path"),l=d.postData;l&&l.thumbs&&l.thumbs.includes(o)&&(l.thumbs=l.thumbs.filter(b=>b!==o),f.modal.open(d),Promise.all([a.e(20056),a.e(40559),a.e(449),a.e(5785),a.e(52185)]).then(function(){var b=[a(71431)];(h=>{h.updateThumbCount(i,$(`[component="composer"][data-uuid="${i}"]`))}).apply(null,b)}).catch(a.oe))})})},f.modal.handleSort=({modal:d,thumbs:t})=>{if(t.length>1){const i=d.find(".topic-thumbs-modal");i.sortable({items:"[data-path]"}),i.on("sortupdate",function(){if(!t)return;const s=[];i.find("[data-path]").each(function(){const n=$(this).attr("data-path"),o=t.find(l=>l===n);o&&s.push(o)}),t.length=0,Array.prototype.push.apply(t,s)})}},f}).apply(E,m),v!==void 0&&(I.exports=v)}),49897:((I,E,a)=>{"use strict";a.r(E),a.d(E,{del:()=>s,get:()=>u,head:()=>f,patch:()=>t,post:()=>d,put:()=>i});var m=a(91749),v=a.n(m),g=a(33530),w=a.n(g);const c=config.relative_path+"/api/v3";async function A(n,o){if(n.url=n.url.startsWith("/api")?config.relative_path+n.url:c+n.url,typeof o=="function"){x(n).then(l=>o(null,l),l=>o(l));return}try{return await x(n)}catch(l){if(l.message==="A valid login session was not found. Please log in and try again."){const{url:b}=await(0,m.fire)("filter:admin.reauth",{url:"login"});return(0,g.confirm)("[[error:api.reauth-required]]",h=>{h&&ajaxify.go(b)})}throw l}}async function x(n){const{url:o}=n;delete n.url,n.data&&!(n.data instanceof FormData)&&(n.data=JSON.stringify(n.data||{}),n.headers["content-type"]="application/json; charset=utf-8"),{options:n}=await(0,m.fire)("filter:api.options",{options:n}),n.data&&(n.body=n.data,delete n.data);const l=await fetch(o,n),{headers:b}=l;if(b.get("x-redirect"))return x({url:b.get("x-redirect"),...n});const h=b.get("content-type"),P=h&&h.startsWith("application/json");let D;if(n.method!=="HEAD"&&(P?D=await l.json():D=await l.text()),!l.ok)throw D?new Error(P?D.status.message:D):new Error(l.statusText);return P&&D&&D.hasOwnProperty("status")&&D.hasOwnProperty("response")?D.response:D}function u(n,o,l){return A({url:n+(o&&Object.keys(o).length?"?"+$.param(o):"")},l)}function f(n,o,l){return A({url:n+(o&&Object.keys(o).length?"?"+$.param(o):""),method:"HEAD"},l)}function d(n,o,l){return A({url:n,method:"POST",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}function t(n,o,l){return A({url:n,method:"PATCH",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}function i(n,o,l){return A({url:n,method:"PUT",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}function s(n,o,l){return A({url:n,method:"DELETE",data:o,headers:{"x-csrf-token":config.csrf_token}},l)}}),74566:((I,E,a)=>{I.exports=a(12236)})}]);
